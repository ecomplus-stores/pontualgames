<%- await include('@/meta') %>

<%
const maintenance = _.cms('maintenance') || {}
if (maintenance.active) {
  // redirect to maintanance page
  %>
  <script>
    if (!location.pathname.startsWith('/maintenance/')) {
      location.href = '/maintenance/'
    }
  </script>
  <%
}
%>

<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').then(registration => {
      console.log('SW registered: ', registration)
    }).catch(registrationError => {
      console.log('SW registration failed: ', registrationError)
    })
  }
</script>
<link rel="stylesheet" type="text/css" href="/storefront.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Teko:wght@400;700&display=swap" rel="stylesheet">

<%
// inject custom code
const customCode = _.cms('code') || {}
if (customCode.css) {
  %>
  <style>
    <%- customCode.css %>
  </style>
  <%
}
%>
<%- customCode.html_head %>
